<!DOCTYPE html>
<html lang="en" >
<head>
<meta charset="utf-8" />
<style>
#my_canvas {
	cursor: crosshair;
	float: left;
	display: none;
	background-color: #CCC;
}
#choice{
	height: 50px;
	width: 50px;
	border: 1px solid #CCC;
}
</style>
<script>
// Set up our image source for color wheel image
var wheel_pic = new Image();
wheel_pic.src = "myWheelSmall.png";
var htmlHex = "";

function createColorWheel(){
     var ctx = document.getElementById('my_canvas').getContext('2d');
     // Draw our color wheel to canvas	
     ctx.drawImage(wheel_pic, 0, 0, wheel_pic.width, wheel_pic.height);
	
    // Create event listener for mousemove
    ctx.canvas.addEventListener('mousemove', function(e){
        // Set the offset for canvas x and y											  
	var X = e.clientX - ctx.canvas.offsetLeft;
        var Y = e.clientY - ctx.canvas.offsetTop;
	var imageData = ctx.getImageData(X, Y, 1, 1);
        var pixel = imageData.data;
	var r = ("0" + (pixel[0]).toString(16)).slice(-2);
	var g = ("0" + (pixel[1]).toString(16)).slice(-2);
	var b = ("0" + (pixel[2]).toString(16)).slice(-2);
	// Compile hex with # and values	
	htmlHex = "#"+r+g+b;
	// Change background color of the canvas as the mouse moves
        var previewColor = document.getElementById('my_canvas').style.background = htmlHex;
    });
    ctx.canvas.addEventListener('click', function(e){										  
        // Apply background color to choice div
	document.getElementById('choice').style.background = htmlHex;
    	// Change css to hide color picker
	document.getElementById('my_canvas').style.display = 'none';  
    });
}
function showWheel(){
    // Show the colorPicker
    document.getElementById("my_canvas").style.display = 'block';	
}
window.onload = createColorWheel;
</script>
</head>
<body>
<button id="showWheel" onClick="showWheel()" />Pick A Color</button>
<div id="choice"></div>
<canvas id="my_canvas" width="251" height="269"></canvas>
</body>
</html>
